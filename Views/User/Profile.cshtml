@model Citlali.Models.User

<form asp-controller="Auth" asp-action="SignOut" method="post">
  <button type="submit" class="btn btn-danger">Sign Out</button>
</form>

@* <img src=@Model.ProfileImageUrl alt="">
<p>Name: @Model.DisplayName</p>
<p>Email: @Model.Email</p>
<p>Bio: @Model.UserBio</p> *@

<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <link rel="stylesheet" href="~/css/Profile.css" />
  </head>
  <body>
    <!-- navbar -->
    <nav>
      <div class="left_box">
        <?xml version="1.0" encoding="utf-8"?><!-- Hamberger Menu -->
        <svg
          width="40px"
          height="40px"
          viewBox="0 0 24 24"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            d="M4 7L7 7M20 7L11 7"
            stroke="#1C274C"
            stroke-width="1.5"
            stroke-linecap="round"
          />
          <path
            d="M20 17H17M4 17L13 17"
            stroke="#1C274C"
            stroke-width="1.5"
            stroke-linecap="round"
          />
          <path
            d="M4 12H7L20 12"
            stroke="#1C274C"
            stroke-width="1.5"
            stroke-linecap="round"
          />
        </svg>
<partial name="_NavBar" />

<div class="container" id="container">
  <div class="profile">
    <div class="pf_and_btn">
      <div style="
              width: 300px;
              height: 300px;
              background-color: grey;
              border-radius: 50%;
            " class="pf_img">
        <img id="pf_image" src="@Model.ProfileImageUrl" alt=""
          style="width: 100%; height: 100%; object-fit: cover; border-radius: 50%;">
      </div>
      
        <!-- Profile Edit Pop-up (Hidden by Default) -->
        <div id="editProfilePopup" class="popup">
          <form class="edit_form" asp-controller="User" asp-action="edit" method="post" enctype="multipart/form-data">

              <h2>Edit Profile</h2>
              
              <!-- Profile Image -->
              <div class="popup_img">
                  <img id="profilePreview" src="@Model.ProfileImageUrl" alt="" style="width: 100%; height: 100%; border-radius: 50%; object-fit: cover; cursor: pointer;">
                  <input type="file" id="profileImage" name="ProfileImage" style="display: none;" />
              </div>

              <!-- Username -->
              <div>
                  <label for="displayName">Username:</label>
                  <input type="text" id="displayName" name="DisplayName" value="@Model.DisplayName" required />
              </div>

              <!-- Bio -->
              <div>
                  <label for="userBio">Bio:</label>
                  <textarea id="userBio" name="UserBio">@Model.UserBio</textarea>
              </div>

              <!-- Save Button -->
              <button type="submit">Save</button>
              <button type="button" onclick="closePopup()">Cancel</button>
          </form>

        </div>


      <div class="post_list"></div>


      <input type="file" id="image_inp" accept="image/*" style="display: none;">
      <button id="editProfileBtn" onclick="openPopup()">
        Edit profile
      </button>
      @* onclick="toggleEditPopup('@Html.Raw(Model.ProfileImageUrl)', '@Html.Raw(Model.DisplayName)', '@Html.Raw(Model.UserBio)')" *@
    </div>

    <div class="pf_detail">
      <div class="pf_usr">
        <h1 contenteditable="false" id="username">@Model.DisplayName</h1>

      </div>

      <div>
        <div class="pf_stat">
          <p>22 post</p>
          <p>33 followers</p>
          <p>44 following</p>
        </div>
        <p contenteditable="false" id="email">@Model.Email</p>
        <p contenteditable="false" id="bio">@Model.UserBio</p>
      </div>
    </div>

    <div class="feedback">
      <?xml version="1.0" encoding="utf-8"?><!-- feedback -->
      <svg width="40px" height="40px" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
        <circle cx="3" cy="3" r="3" transform="matrix(-1 0 0 1 22 2)" stroke="#1C274C" stroke-width="1.5" />
        <path
          d="M14 2.20004C13.3538 2.06886 12.6849 2 12 2C10.1786 2 8.47087 2.48697 7 3.33782M21.8 10C21.9311 10.6462 22 11.3151 22 12C22 17.5228 17.5228 22 12 22C10.4003 22 8.88837 21.6244 7.54753 20.9565C7.19121 20.7791 6.78393 20.72 6.39939 20.8229L4.17335 21.4185C3.20701 21.677 2.32295 20.793 2.58151 19.8267L3.17712 17.6006C3.28001 17.2161 3.22094 16.8088 3.04346 16.4525C2.37562 15.1116 2 13.5997 2 12C2 10.1786 2.48697 8.47087 3.33782 7"
          stroke="#1C274C" stroke-width="1.5" stroke-linecap="round" />
      </svg>
    </div>

  </div>
  <!-- Profile Edit Pop-up (Hidden by Default) -->
  <div id="editProfilePopup" class="popup" style="display: none;">
    <form class="edit_form" asp-controller="User" asp-action="edit" method="post" enctype="multipart/form-data">

      <h2>Edit Profile</h2>

      <!-- Profile Image -->
      <div class="popup_img">
        <img id="profilePreview" src="@Model.ProfileImageUrl" alt=""
          style="width: 100%; height: 100%; border-radius: 50%; object-fit: cover; cursor: pointer;">
        <input type="file" id="profileImage" name="ProfileImage" style="display: none;" />
      </div>

      <!-- Username -->
      <div>
        <label for="displayName">Username:</label>
        <input type="text" id="displayName" name="DisplayName" value="@Model.DisplayName" required />
      </div>

      <!-- Bio -->
      <div>
        <label for="userBio">Bio:</label>
        <textarea id="userBio" name="UserBio">@Model.UserBio</textarea>
      </div>

      <!-- Save Button -->
      <button type="submit">Save</button>
      <button type="button" onclick="closePopup()">Cancel</button>
    </form>

  </div>


  <div class="post_list"></div>

</div>

<script src="~/js/Profile.js"></script>
